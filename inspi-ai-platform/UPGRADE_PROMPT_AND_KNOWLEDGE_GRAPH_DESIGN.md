# 升级提示设计 & 个人知识库图谱模块

**文档版本**: v1.0  
**创建时间**: 2025年9月17日  
**设计范围**: 配额超限升级提示 + 个人知识库图谱系统

## 📋 目录

1. [升级提示设计](#升级提示设计)
2. [个人知识库图谱模块](#个人知识库图谱模块)
3. [技术实现方案](#技术实现方案)
4. [用户体验设计](#用户体验设计)
5. [商业价值分析](#商业价值分析)

---

## 升级提示设计

### 🎯 设计目标

当用户配额用完时，通过精心设计的升级提示，引导用户了解付费套餐的价值，促进付费转化。

### 📱 升级提示场景

#### 1. 创建配额用完场景

**触发时机**: 用户尝试创建新卡片，但当日创建配额已用完

**提示设计**:
```
🎨 今日创建配额已用完

您今天已经创建了 3 张精美卡片！

升级到基础版，享受更多创作自由：
✨ 每日 20 张创建配额 (提升 567%)
✨ 每日 5 张复用配额 (提升 400%)  
✨ 高清图片导出
✨ 批量操作功能

[立即升级 ¥69/月]  [明天再试]

💡 升级用户平均每月创建 450+ 张卡片
```

#### 2. 复用配额用完场景

**触发时机**: 用户尝试复用卡片，但当日复用配额已用完

**提示设计**:
```
🔄 今日复用配额已用完

这个卡片很棒！但您今天的复用次数已达上限。

升级解锁更多复用机会：
📚 基础版：每日 5 次复用 (¥69/月)
🚀 专业版：每日 50 次复用 (¥199/月)

复用功能让您：
• 快速构建教学体系
• 积累个人知识库
• 提升创作效率 10 倍

[查看升级方案]  [收藏稍后复用]
```

#### 3. 渐进式升级引导

**免费用户 → 基础版**:
```
🌟 发现您是活跃创作者！

过去 7 天您已创建 15 张卡片
升级基础版，释放更大创作潜力：

对比分析：
免费版：3 创建 + 1 复用 = 4张/天
基础版：20 创建 + 5 复用 = 25张/天

提升 525% 创作效率！

[升级基础版 ¥69/月]
```

**基础版 → 专业版**:
```
🚀 您已是专业创作者！

本月您已创建 380 张卡片，使用率 95%
升级专业版，解锁企业级功能：

专业版独享：
• 每日 100 创建 + 50 复用
• 自定义品牌水印
• 数据导出备份
• 专属客服支持

[升级专业版 ¥199/月]
```

### 🎨 视觉设计规范

#### 弹窗设计
- **尺寸**: 最大宽度 480px，自适应高度
- **圆角**: 16px，现代化设计
- **阴影**: 深度阴影，突出层级
- **动画**: 从下方滑入，吸引注意

#### 色彩方案
- **主色调**: 渐变蓝色 (#3b82f6 → #1d4ed8)
- **强调色**: 金色 (#f59e0b) 突出价值
- **成功色**: 绿色 (#10b981) 表示升级
- **背景**: 半透明遮罩 (rgba(0,0,0,0.5))

#### 文案策略
- **情感化**: 使用"您"而非"你"，体现尊重
- **数据化**: 具体的数字和百分比提升
- **价值化**: 突出功能价值而非价格
- **紧迫感**: 适度的稀缺性和时效性

---

## 个人知识库图谱模块

### 🎯 模块愿景

帮助教育工作者构建个人化的知识体系，通过AI卡片的创建和复用，逐步形成完整的教学知识图谱。

### 📚 核心功能设计

#### 1. 知识图谱构建

**自动构建机制**:
- 用户创建的每张卡片自动成为图谱节点
- 基于卡片内容自动识别知识点和关联关系
- 复用公开卡片时，标记为外部来源节点
- AI智能分析，推荐相关知识点连接

**手动编辑功能**:
- 拖拽调整节点位置和层级关系
- 手动添加/删除知识点连接
- 自定义节点分类和标签
- 设置知识点的重要程度和掌握状态

#### 2. 知识图谱可视化

**多维度展示**:
```typescript
// 图谱展示维度
interface GraphViewMode {
  SUBJECT_TREE: '学科树形图',      // 按学科分层展示
  TIMELINE: '时间轴视图',          // 按创建时间排序
  DIFFICULTY: '难度梯度图',        // 按难易程度分层
  USAGE_HEAT: '使用热力图',        // 按使用频率着色
  RELATION_NETWORK: '关系网络图'   // 突出知识点关联
}
```

**交互功能**:
- 点击节点查看卡片详情
- 悬停显示知识点摘要
- 缩放和平移浏览大型图谱
- 搜索定位特定知识点
- 路径高亮显示学习路径

#### 3. 智能推荐系统

**知识缺口分析**:
```
📊 您的数学知识图谱分析

完整度：78% (高于平均水平)
薄弱环节：
• 微积分应用 (缺少 3 个核心概念)
• 概率统计 (关联度较低)

推荐创建：
1. 导数在物理中的应用
2. 正态分布的实际案例
3. 积分与面积计算

[一键创建推荐卡片]
```

**学习路径规划**:
- 基于知识图谱生成最优学习路径
- 识别前置知识和后续扩展
- 推荐相关教师的优质卡片
- 生成个性化学习计划

#### 4. 个人数据管理

**数据导出功能**:
- 导出知识图谱为图片格式 (PNG/PDF)
- 生成个人教学大纲文档
- 备份知识图谱数据 (JSON格式)
- 打印友好的图谱布局

**数据同步**:
- 云端自动备份图谱数据
- 多设备间数据同步
- 数据恢复和版本管理
- 个人隐私数据保护

### 🏗️ 技术架构设计

#### 数据模型扩展

```typescript
// 个人知识图谱
interface PersonalKnowledgeGraph extends KnowledgeGraph {
  userId: string;
  subject: string;           // 学科领域
  level: EducationLevel;     // 教育层级
  completeness: number;      // 完整度 0-100
  lastUpdated: Date;
  
  // 统计信息
  stats: {
    totalNodes: number;      // 总节点数
    totalEdges: number;      // 总连接数
    createdNodes: number;    // 自创节点数
    reusedNodes: number;     // 复用节点数
    avgUsageFreq: number;    // 平均使用频率
  };
  
  // 个性化设置
  preferences: {
    defaultLayout: GraphLayout;
    colorScheme: string;
    showDifficulty: boolean;
    showUsageHeat: boolean;
  };
}

// 知识节点扩展
interface PersonalGraphNode extends GraphNode {
  cardId: string;            // 关联的卡片ID
  source: 'created' | 'reused' | 'imported';
  masteryLevel: number;      // 掌握程度 0-100
  usageCount: number;        // 使用次数
  lastUsed: Date;
  
  // 教学相关
  teachingNotes?: string;    // 教学笔记
  studentFeedback?: string;  // 学生反馈
  difficultyRating: number;  // 难度评级 1-5
}
```

#### API设计

```typescript
// 个人知识图谱API
interface PersonalGraphAPI {
  // 图谱管理
  createGraph(subject: string, level: EducationLevel): Promise<PersonalKnowledgeGraph>;
  getMyGraphs(): Promise<PersonalKnowledgeGraph[]>;
  updateGraph(graphId: string, updates: Partial<PersonalKnowledgeGraph>): Promise<void>;
  
  // 节点操作
  addCardToGraph(graphId: string, cardId: string, position?: NodePosition): Promise<void>;
  updateNodeMastery(nodeId: string, masteryLevel: number): Promise<void>;
  addTeachingNote(nodeId: string, note: string): Promise<void>;
  
  // 智能分析
  analyzeGraphCompleteness(graphId: string): Promise<GraphAnalysis>;
  getRecommendations(graphId: string): Promise<RecommendationList>;
  generateLearningPath(graphId: string, targetNode: string): Promise<LearningPath>;
  
  // 数据管理
  exportGraph(graphId: string, format: 'png' | 'pdf' | 'json'): Promise<ExportResult>;
  backupGraphData(graphId: string): Promise<BackupResult>;
  restoreGraphData(backupId: string): Promise<PersonalKnowledgeGraph>;
}
```

### 📱 用户界面设计

#### 1. 知识图谱主页

**布局结构**:
```
┌─────────────────────────────────────────┐
│ 🧠 我的知识图谱                          │
├─────────────────────────────────────────┤
│ [数学] [物理] [化学] [+ 新建学科]        │
├─────────────────────────────────────────┤
│ 📊 整体统计                              │
│ • 总计 156 个知识点                      │
│ • 本月新增 23 个                         │
│ • 平均完整度 82%                         │
├─────────────────────────────────────────┤
│ 🎯 今日推荐                              │
│ • 完善"函数极限"相关概念                 │
│ • 添加"牛顿定律"应用实例                 │
│ [查看全部推荐]                           │
└─────────────────────────────────────────┘
```

#### 2. 图谱可视化界面

**工具栏设计**:
```
[🔍 搜索] [📐 布局] [🎨 样式] [📊 分析] [💾 导出]

布局选项：
• 🌳 学科树形图
• ⏰ 时间轴视图  
• 📈 难度梯度图
• 🔥 使用热力图
• 🕸️ 关系网络图

导出选项：
• 📷 导出为图片
• 📄 生成教学大纲
• 💾 备份数据
```

**侧边面板**:
```
┌─────────────────┐
│ 📋 节点详情      │
├─────────────────┤
│ 标题：二次函数   │
│ 类型：核心概念   │
│ 难度：⭐⭐⭐     │
│ 掌握度：85%      │
│ 使用：12次       │
├─────────────────┤
│ 🔗 相关连接      │
│ • 一次函数       │
│ • 函数图像       │
│ • 最值问题       │
├─────────────────┤
│ [查看卡片]       │
│ [编辑节点]       │
│ [添加笔记]       │
└─────────────────┘
```

#### 3. 智能分析报告

**分析维度**:
```
📊 知识图谱分析报告

🎯 完整度分析
├─ 整体完整度：78%
├─ 核心概念覆盖：92%
├─ 应用实例覆盖：65%
└─ 练习题目覆盖：71%

🔍 薄弱环节识别
├─ 微积分应用 (缺少3个核心概念)
├─ 概率统计 (关联度较低)
└─ 几何证明 (实例不足)

📈 使用情况统计
├─ 高频使用：函数、方程、几何
├─ 低频使用：统计、概率、逻辑
└─ 未使用：高等数学预备知识

🎯 改进建议
├─ 优先补充微积分应用实例
├─ 加强概率统计知识连接
└─ 增加几何证明方法总结
```

### 🎓 教学场景应用

#### 1. 备课助手

**课程规划**:
- 基于知识图谱生成课程大纲
- 识别学生的知识基础和薄弱点
- 推荐合适的教学顺序和重点
- 生成个性化的教学计划

**教学资源整合**:
- 将相关卡片组织成教学单元
- 自动生成课件和讲义
- 推荐配套的练习和案例
- 建立知识点的评估体系

#### 2. 学习路径规划

**个性化路径**:
```
🎯 "函数"学习路径规划

基础路径 (适合初学者)：
1. 函数的概念 → 2. 函数的表示 → 3. 函数的性质
4. 一次函数 → 5. 二次函数 → 6. 反比例函数

进阶路径 (适合提高者)：
1. 复合函数 → 2. 反函数 → 3. 函数的极值
4. 函数的单调性 → 5. 函数的周期性

预计学习时间：基础路径 2-3周，进阶路径 1-2周
```

#### 3. 教学效果评估

**数据驱动评估**:
- 追踪学生对不同知识点的掌握情况
- 分析教学内容的使用频率和效果
- 识别需要重点讲解的难点
- 优化教学方法和资源配置

### 💰 商业价值分析

#### 1. 用户粘性提升

**数据预期**:
- 知识图谱用户的平均使用时长提升 300%
- 月活跃度提升 250%
- 用户留存率提升至 85%
- 付费转化率提升至 15%

**粘性机制**:
- 知识图谱的构建需要长期积累
- 个人化数据难以迁移到其他平台
- 个人教学体系的持续完善
- 持续的智能推荐保持新鲜感

#### 2. 付费转化驱动

**升级动机**:
- 免费用户：图谱节点数量限制 (最多50个)
- 基础版：解锁高级分析和推荐功能，支持数据导出
- 专业版：支持多学科图谱和高级数据管理

**价值感知**:
- 知识图谱可视化提升专业形象
- 智能分析报告体现平台价值
- 个性化推荐节省备课时间
- 数据导出功能支持多场景使用

#### 3. 生态建设价值

**个人价值**:
- 个人知识体系的可视化管理
- 教学经验的数字化积累
- 个性化的学习路径规划
- 长期的教学效果追踪

**数据价值**:
- 收集教学知识结构数据
- 分析学习路径的有效性
- 优化AI推荐算法
- 为教育产品提供数据支撑

---

## 实施建议

### 📅 开发优先级

#### Phase 1: 升级提示系统 (2周)
- [ ] 配额检查和提示触发机制
- [ ] 升级提示弹窗设计和开发
- [ ] A/B测试不同提示文案的转化效果
- [ ] 微信支付流程集成

#### Phase 2: 基础知识图谱 (4周)
- [ ] 个人知识图谱数据模型
- [ ] 卡片到图谱节点的自动映射
- [ ] 基础的图谱可视化界面
- [ ] 节点编辑和关系管理功能

#### Phase 3: 智能分析功能 (3周)
- [ ] 知识图谱完整度分析
- [ ] 智能推荐算法开发
- [ ] 学习路径规划功能
- [ ] 分析报告生成

#### Phase 4: 数据管理功能 (1周)
- [ ] 知识图谱导出功能 (图片/PDF/数据)
- [ ] 教学大纲生成
- [ ] 数据备份和恢复
- [ ] 多设备数据同步

### 🎯 成功指标

#### 升级提示效果
- **提示展示率**: >80% (配额用完用户)
- **点击转化率**: >25% (点击升级按钮)
- **支付转化率**: >60% (点击后完成支付)
- **整体付费转化**: 从5%提升至12%

#### 知识图谱使用
- **图谱创建率**: >40% (注册用户)
- **日活跃度**: >60% (图谱用户)
- **节点增长**: 平均每用户每月新增20个节点
- **数据导出**: 每月平均导出2次图谱数据

---

## 📝 总结

### 核心价值
1. **精准转化**: 智能升级提示在关键时刻促进付费转化
2. **深度粘性**: 个人知识图谱构建长期用户价值
3. **生态建设**: 知识分享和协作形成平台生态
4. **教育价值**: 真正帮助教育工作者提升教学效果

### 技术亮点
1. **智能触发**: 基于用户行为的精准升级提示
2. **自动构建**: AI驱动的知识图谱自动生成
3. **多维可视**: 丰富的图谱展示和交互方式
4. **协作共享**: 知识图谱的社区化运营

### 预期成果
- **付费转化率**: 从5%提升至12%
- **用户留存率**: 提升至85%
- **平均使用时长**: 提升300%
- **月收入增长**: 预期提升150%

这个设计将显著提升产品的商业价值和用户体验，建立可持续的竞争优势。

---

**文档状态**: ✅ 设计完成，等待开发实施  
**下一步**: 开始升级提示系统的开发工作